<div class="head">
  {% if page.title %}
  <div id="masthead">
    <h3><a href="{{ site.baseurl | prepend: site.url}}">{{ site.title }}</a></h3>
  </div>

  {% else %}
  <div id="masthead">
    <h1>{{ site.title }}</h1>
   <!-- <h6 style="text-align:center">{{ site.description }}</h6> -->
  </div>
  {% endif %}
</div>

  <!-- 추가된 상단 네비게이션 영역 -->
  <nav class="top-nav">
    <ul>
      {% for item in site.nav %}
        {% if item.subitems %}
          <li class="dropdown">
            <a href="#">{{ item.name }} ▾</a>
            <ul class="dropdown-menu">
              {% for sub in item.subitems %}
                <li><a href="{{ sub.url }}">{{ sub.name }}</a></li>
              {% endfor %}
            </ul>
          </li>
        {% else %}
          <li>
            <a href="{{ item.url }}"
               {% if item.target %} target="{{ item.target }}" {% endif %}>
               {{ item.name }}
            </a>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </nav>
  <script>
  document.addEventListener("DOMContentLoaded", function() {
    const dropdown = document.querySelector(".dropdown");
    const link = dropdown.querySelector("a");

    let isLocked = false; // 클릭으로 고정된 상태인지 여부

    // 마우스 hover 시 (고정되지 않은 상태일 때만)
    dropdown.addEventListener("mouseenter", function() {
      if (!isLocked) dropdown.classList.add("active");
    });
    dropdown.addEventListener("mouseleave", function() {
      if (!isLocked) dropdown.classList.remove("active");
    });

    // 게시글 클릭 시 고정/해제
    link.addEventListener("click", function(event) {
      event.preventDefault(); // 링크 이동 방지

      if (isLocked) {
        dropdown.classList.remove("active");
        isLocked = false;
      } else {
        dropdown.classList.add("active");
        isLocked = true;
      }
    });

    // 바깥 클릭 시 닫기
    document.addEventListener("click", function(event) {
      if (!dropdown.contains(event.target)) {
        dropdown.classList.remove("active");
        isLocked = false;
      }
    });
  });
  </script>
</div>

